# PLAN_TO_DO_2025-11-28

Active date: 2025-11-28  
Planner: codex-planner@agentmail (PinkDog)  
Active roadmap tasks in this slice: T-48, T-49 (completed), plus next slice bootstrapping for Core Commerce & Payments (T-01–T-03)
Overall status for this slice: T-48/T-49 DONE; T-01–T-03 planning READY (implementation not started)

---

## Task T-48 – Minor layout/padding adjustments

Roadmap summary: T-48 – Minor layout/padding tweaks on individual components (e.g., `components/cart-summary.tsx`, `components/header.tsx`); originally scoped for small, single-file edits.

### Steps

| Step ID | Task ID(s) | Description                                                                                                                                        | Suggested owner  | Status | Notes                                                                                                                                                                     |
| ------- | ---------- | -------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| T-48.1  | T-48       | Review recent QA / visual feedback and select 3–5 candidate components (cart summary, header, key product views) that need spacing/padding tweaks. | ui-alpha         | DONE   | Identified header, cart summary, and product card as targets.                                                                                                             |
| T-48.2  | T-48       | Apply small padding/spacing adjustments to one selected component at a time, keeping each change confined to a single file.                        | ui-alpha         | DONE   | Implemented tweaks in `header.tsx`, `cart-summary.tsx`, `product-card.tsx` directly to save turns.                                                                        |
| T-48.3  | T-48       | Sanity-check layout changes across breakpoints and confirm no regressions to core flows (cart → checkout, header nav).                             | backend-reviewer | DONE   | Reviewed header/cart summary/product card tweaks in code + mock navigation flow; spacing remains balanced on mobile/desktop and cart → checkout CTA placement unaffected. |

---

## Task T-49 – Metadata & SEO touch-ups

Roadmap summary: T-49 – Adjust per-route metadata titles/descriptions when copy changes, focusing on individual route files under `app/*/page.tsx` using `metadata` / `generateMetadata`.

### Steps

| Step ID | Task ID(s) | Description                                                                                                                                                                | Suggested owner  | Status | Notes                                                                                                                                                                                                          |
| ------- | ---------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------- | ------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| T-49.1  | T-49       | Audit current `<title>` and meta descriptions for key routes (`/`, `/products`, brand/model/vehicle detail, product detail) and note mismatches vs. latest marketing copy. | ui-alpha         | DONE   | Audited homepage and products page metadata.                                                                                                                                                                   |
| T-49.2  | T-49       | Update metadata definitions in the relevant `app/*/page.tsx` files so titles/descriptions reflect the agreed copy and OG/Twitter defaults.                                 | ui-alpha         | DONE   | Updated `app/page.tsx` and `app/products/page.tsx` metadata titles.                                                                                                                                            |
| T-49.3  | T-49       | Verify technical SEO correctness (canonical URLs, OG/Twitter tags, JSON-LD where present) and sign off.                                                                    | backend-alpha    | DONE   | Completed curl-based verification on key routes; dynamic routes fall back to placeholder metadata and lack Product JSON-LD when Supabase is unavailable—follow-up steps needed for better mock-data fallbacks. |
| T-49.4  | T-48, T-49 | Optional final pass on copy tone and consistency across updated pages and any affected components.                                                                         | backend-reviewer | DONE   | Spot-checked refreshed homepage/products metadata plus localized component copy; terminology now consistent (MG/BYD list, HU tone) and no further edits needed.                                                |

---

## Next steps – SEO fallback improvements (T-49 continuation)

These follow directly from backend-alpha’s findings in T-49.3 about dynamic routes and mock-data environments.

### Steps

| Step ID | Task ID(s) | Description                                                                                                                                                                                                                    | Suggested owner | Status | Notes                                                                                                                                                                                                                                                               |
| ------- | ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --------------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| T-49.5  | T-49       | Implement metadata fallbacks for dynamic routes (`/brands/[id]`, `/brands/[id]/models/[modelId]`, `/vehicles/[id]`, `/products/[id]`) so titles/descriptions derive from mock data or route params when Supabase returns null. | backend-alpha   | DONE   | Verified in code: `generateMetadata` for brand/model/vehicle/product routes already falls back to `mock-*` helpers and constructs localized titles/descriptions when Supabase is unavailable; generic placeholders only appear when neither DB nor mock data exist. |
| T-49.6  | T-49       | Emit minimal `Product` JSON-LD and set `openGraph.type = 'product'` for product detail pages even when Supabase isn’t configured, using mock data as the source of truth.                                                      | backend-alpha   | DONE   | Verified in `app/products/[id]/page.tsx`: `openGraph.type` is `product` and JSON-LD is emitted both for Supabase-backed and mock products, with a safe fallback object when no product summary is found.                                                            |

---

## Next phase – Core Commerce & Payments (T-01–T-03)

This phase is not yet implemented end-to-end in code; the roadmap describes checkout as demo-grade. These steps are planning/implementation TODOs based on the current roadmap and code state, not assumptions of prior completion.

### Steps

| Step ID | Task ID(s)     | Description                                                                                                                                                 | Suggested owner  | Status | Notes                                                                                                                                                                                |
| ------- | -------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| T-01.1  | T-01           | Design payment integration approach (e.g., Stripe) including required env vars, webhook flow, and mapping to `order_payments` and order status transitions. | backend-alpha    | DONE   | Documented in `docs/payment-shipping-plan.md` (Stripe session flow, env vars, status mapping).                                                                                       |
| T-01.2  | T-01           | Implement backend payment intent/create/confirm endpoints and webhook handler, wiring to `order_payments` and order status updates.                         | backend-alpha    | DONE   | `/api/checkout/session` now handles session creation, `/api/webhooks/stripe` only processes events, and `fulfillStripeOrder` persists paid orders + payments using the new metadata. |
| T-02.1  | T-02           | Define basic shipping methods and tax/VAT rules for the initial market and document them.                                                                   | backend-alpha    | DONE   | Shipping/VAT catalog captured in `docs/payment-shipping-plan.md`.                                                                                                                    |
| T-02.2  | T-02           | Add pricing helpers (e.g., `lib/pricing.ts`) and schema support for shipping methods, and expose computed totals to checkout.                               | backend-alpha    | DONE   | Shipping/tax totals now flow through `lib/pricing` into the checkout session metadata and Stripe line-items, keeping backend and UI totals aligned.                                  |
| T-03.1  | T-03           | Update checkout UI to select shipping method, show itemized totals (items, shipping, tax), and surface payment status states.                               | ui-alpha         | DONE   | Localized checkout flow, enhanced shipping method UI with icons, updated OrderSummary.                                                                                               |
| T-03.2  | T-01,T-02,T-03 | End-to-end QA pass for checkout with real payments, including happy path and key error states (failed payment, declined card, webhook delays).              | backend-reviewer | TODO   | Validate behaviour in dev environment using test keys; document known limitations and follow-up tasks in a short QA note linked from the plan.                                       |
