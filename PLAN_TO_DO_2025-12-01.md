1. Core Commerce & Payments – checkout lezárás, order lifecycle, e-mailek

(Roadmap: T-03.2, T-04, T-05, T-06, T-24)

Task group: Checkout QA & Guest checkout (T-03.2, T-04)
Step ID Task ID(s) Description Suggested owner Status Notes
T-03.2a T-03.2 Végigtesztelni a checkout flow-t regisztrált userrel: kosár → checkout → shipping választás → fizetés → visszairányítás → order state/payments DB ellenőrzés. backend-reviewer TODO Minimum: 1 sikeres, 1 szándékosan elrontott fizetés (declined card). QA jegyzet készüljön.
T-03.2b T-03.2 Végigtesztelni a checkout flow-t Supabase nélkül / mock módban, és dokumentálni a limitációkat (mi működik, mi nem). backend-reviewer TODO Cél: egyértelmű legyen, mit nem tud a demo mód, hogy ne legyenek tévképzetek.
T-04.1 T-04 Adatmodell kiegészítése guest checkout-hoz: opcionális guest mezők az orders táblában (pl. guest_email, guest_name, stb.) és RLS ellenőrzés. backend-alpha TODO scripts/00-schema.sql + RLS update.
T-04.2 T-04 Checkout UI módosítása: „Folytatás vendégként” opció, e-mail + alap adatok bekérése, és ezek átadása az order create / payment session endpointoknak. ui-alpha TODO app/checkout/page.tsx + OrderSummary komponens.
T-04.3 T-04 Order create logika módosítása: user nélküli rendelés esetén a guest mezők töltése, user esetén a jelenlegi flow megtartása. backend-alpha TODO lib/db.ts order creation helper refaktor.
T-04.4 T-03.2,T-04 End-to-end teszt: 1 sikeres guest rendelés Stripe teszt kártyával, order + payment rekord ellenőrzése, e-mail (ha már bekötve) ellenőrzése. backend-reviewer TODO QA jegyzet: screenshot + payload kivonat.
Task group: Order lifecycle & Admin orders UI (T-05, T-06)
Step ID Task ID(s) Description Suggested owner Status Notes
T-05.1 T-05 Order státusz modell véglegesítése (pending/paid/processing/shipped/cancelled/refunded) és rövid állapotgép-diagram készítése (md a /docs alatt). backend-alpha TODO Ez lesz a referenciadoksi minden későbbi módosításhoz.
T-05.2 T-05 lib/db.ts – új helper függvény(ek) order státusz frissítésére, konzisztensek az order_payments állapotaival. backend-alpha TODO Tiszta, jól típusos API: updateOrderStatus(orderId, newStatus, meta?).
T-05.3 T-05 Új /app/api/orders/[id]/status route: PATCH endpoint, amely csak jogosult role-oknak enged státusz módosítást (auth + RLS figyelembevétele). backend-alpha TODO Később az admin UI és esetleges automatizmusok is ezt hívják.
T-05.4 T-05 Alap unit/integration tesztek az order státusz helperre és API route-ra (boldog út + tiltott státuszváltás). backend-alpha TODO Min. Jest/Playwright API teszt.
T-06.1 T-06 /admin/orders lista oldal: táblázat order ID, dátum, customer (user vagy guest), total, status, payment status, egyszerű szűrő státuszra és dátumra. ui-alpha TODO app/admin/orders/page.tsx + admin layoutba bekötés.
T-06.2 T-06 Admin order detail nézet: rendelés sorok, shipping/tax bontás, státuszváltó dropdown, payment timeline (fizetési események listája). ui-alpha TODO components/admin-order-detail.tsx.
T-06.3 T-05,T-06 Admin UI-ból státusz update bekötése az új /api/orders/[id]/status endpoint-ra, optimista UI update + hibaüzenetek. ui-alpha TODO Fontos: ne rejtsd el a hibákat, legyen egyértelmű, ha nem sikerül a mentés.
T-06.4 T-06 Rövid admin QA kör: legalább 3 szcenárió (pending→paid, paid→shipped, shipped→cancelled tiltása) és dokumentálás. backend-reviewer TODO QA jegyzet: mi működik, mi tiltott, milyen hibaüzenetek jelennek meg.
Task group: Transactional e-mailek (T-24)
Step ID Task ID(s) Description Suggested owner Status Notes
T-24.1 T-24 E-mail provider kiválasztása (pl. Resend, Brevo, stb.), env változók definiálása és dokumentálása (sandbox + prod). backend-alpha TODO Rövid döntési jegyzet a /docs alatt; ne maradjon homályban, miért ez lett választva.
T-24.2 T-24 lib/email.ts létrehozása: alapszintű wrapper (sendOrderConfirmation, sendPasswordReset), típusos input paraméterekkel. backend-alpha TODO Cél: a későbbi sabloncsere ne érintse az egész kódot.
T-24.3 T-24 Order confirmation e-mail hívása a sikeres fizetés/paid státuszra váltás után (Stripe webhook flow-ban és bármely manuális paid set után). backend-alpha TODO Vigyázni kell, hogy duplán ne küldjön, idempotens megoldás.
T-24.4 T-24 Password reset flow bekötése: e-mail küldés, token kezelés (ha még nincs, minimális reset stub, ami működőképes és biztonságos). backend-alpha TODO app/auth/reset-password/page.tsx + kapcsolódó API route-ok.
T-24.5 T-24 Teszt kör: 1–1 mock rendelés valós teszt e-mail címre (dev env), 1 password reset. Ellenőrizni subject, szöveg, linkek, branding. backend-reviewer TODO Ne maradjon „lorem ipsum” jellegű szöveg – ha mégis, írd be a javítandók listájába. 2. Catalog & Search – full-text keresés és autocomplete

(Roadmap: T-07, T-08, T-09)

Task group: Full-text search backend (T-07, T-08)
Step ID Task ID(s) Description Suggested owner Status Notes
T-07.1 T-07 Full-text index design: mely mezők kerülnek indexbe (name, oem, brand, category, keywords), milyen súlyozással; rövid leírás a /docs alatt. backend-alpha TODO Itt kell eldönteni, hogy OEM keresés és szabad szavas keresés hogyan él együtt.
T-07.2 T-07 PostgreSQL GIN index(ek) és tsvector generálás hozzáadása a migrations-hoz (scripts/00-schema.sql vagy külön migration). backend-alpha TODO Figyelj a meglévő indexekre, ne robbantsd szét a performanciát.
T-07.3 T-07 lib/db.ts új typed search helper: input (query string + opciók), output (produkt list + relevancia score), egységes interface a frontend felé. backend-alpha TODO Cél: egyetlen „igazságforrás” a kereséshez.
T-08.1 T-08 Search suggestions API (/app/api/search/suggest/route.ts): javaslatok és népszerű lekérdezések (pl. top OEM-ek, top márkák) aggregálásának megtervezése. backend-alpha TODO Legalább minimális logging statisztikához (mi a top keresés).
T-08.2 T-08 API implementáció: input (query prefix), output (lista: javasolt kifejezések, OEM találatok, kategória javaslatok). backend-alpha TODO Strukturált JSON, amit a UI könnyen meg tud jeleníteni.
T-08.3 T-07,T-08 Rövid API tesztek: üres query, rövid query, hosszú query, nem létező OEM – ne dobjon hibát, legyen értelmes fallback (pl. „népszerű keresések”). backend-alpha TODO Legalább 4–5 konkrét teszt.
Task group: Header search autocomplete UI (T-09)
Step ID Task ID(s) Description Suggested owner Status Notes
T-09.1 T-09 Autocomplete UX specifikáció: milyen típusú javaslatok jelenjenek meg (termék, OEM, kategória), milyen ikonokkal, milyen keyboard navigációval (↑↓, Enter). ui-alpha TODO Rövid Figma / md leírás, hogy ne „ad hoc” alakuljon.
T-09.2 T-09 components/search-autocomplete.tsx megírása: input fókusz, debounced API hívás a /api/search/suggest endpoint-ra, loading/empty state. ui-alpha TODO Tailwind + shadcn/ui; figyelj a mobil használhatóságra.
T-09.3 T-09 Header integráció (components/header.tsx): meglévő kereső lecserélése / kibővítése autocomplete-tel, ARIA attribútumokkal. ui-alpha TODO Ne romoljon el a jelenlegi layout (desktop + mobile).
T-09.4 T-07–T-09 Gyors UX QA: 3 tipikus flow (OEM, márkanév, teljesen rossz query). Ellenőrizni: billentyűzet vezérlés, „no results” üzenet, mobil tap célpontok. backend-reviewer TODO Ha valami idegesítő (villogás, ugrálás), az kerüljön a következő polish kör listájába.
